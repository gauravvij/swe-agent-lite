--- a/tests/migrations/test_operations.py
+++ b/tests/migrations/test_operations.py
@@ -1,6 +1,8 @@
+import warnings
+
 from django.core.exceptions import FieldDoesNotExist
 from django.db import connection, migrations, models, transaction
 from django.db.migrations.migration import Migration
+from django.db.migrations.optimizer import MigrationOptimizer
 from django.db.migrations.operations import CreateModel
 from django.db.migrations.operations.fields import FieldOperation
 from django.db.migrations.state import ModelState, ProjectState
@@ -115,6 +117,35 @@
                 models.Index(fields=["pink", "weight"], name="pony_pink_weight_idx")
             ))
         if multicol_index:
+            operations.append(migrations.AddIndex(
+                "Pony",
+                models.Index(fields=["pink", "weight"], name="pony_pink_weight_idx")
+            ))
+        return project_state
+
+    def test_squash_index_together_no_warning(self):
+        """
+        Squashing migrations with index_together -> indexes transition
+        should not raise deprecation warnings.
+        """
+        optimizer = MigrationOptimizer()
+        operations = [
+            migrations.CreateModel(
+                "Pony",
+                [
+                    ("id", models.AutoField(primary_key=True)),
+                    ("pink", models.IntegerField(default=3)),
+                    ("weight", models.FloatField()),
+                ],
+            ),
+            migrations.AlterIndexTogether(
+                "Pony",
+                [["pink", "weight"]],
+            ),
+            migrations.AddIndex(
+                "Pony",
+                models.Index(fields=["pink", "weight"], name="pony_pink_weight_idx"),
+            ),
+        ]
+        with warnings.catch_warnings(record=True) as w:
+            warnings.simplefilter("always")
+            optimizer.optimize(operations, "tests")
+            index_together_warnings = [x for x in w if "index_together" in str(x.message)]
+            self.assertEqual(len(index_together_warnings), 0)
+
+
+class Mixin:
+    pass